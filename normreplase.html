<!DOCTYPE html>
<html>
  <head>
    <title>1-4 tzi lab</title>
  <!-- Bootstrap -->
    <meta name="lab 1-4 tzi" content="">
    <meta name="Serhii Onishchuk" content="">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    
    <script src="js/jquery-1.12.2.js"></script>
    
    <script src="js/Chart.js"></script>

    
    <script src="js/bootstrap.js"></script>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/bootstrap-theme.css">
    <link rel="stylesheet" href="css/normalize.css">
    
  </head>
  <body>
   <script>
       
       var sttr = "MN,UOLBUNLEUNMUWHEUPW,QCWQ,EKUEYEFELWPURE,EUGLPWOYYEKUCN,,EYOWGNLPVURHGCHUKEMGLEUWHEUZEHOSGNQ,UNMUWHEUCO,UGLUWHGPUTNLEVUGLU-O,WGCQYO,VUGWPUSEYNCGWBUOLKUFOLNEQS,EXUWHEUFOGLU-Q,-NPEUNMU-,N-NPEKUFNKEYPU.UCNF-QWE,UFNKEYYGLJUOLKUCO,,BGLJUNQWU,EPEO,CHEPUMN,UOQWNFOWGNLUNMUW,OLP-N,WUOLKU-EKEPW,GOLUMYNRUFOLOJEFELWVUOPUREYYUOPUN-WGFGTOWGNLUNMUPNYSGLJUNMUWHEU,NQWGLJUWOPDPXUGLU-O,WGCQYO,VUCNFFQWOWGNLUFOW,G'EPUO,EU,ECEGSEKUMN,UKGMME,ELWUC,NPP,NOKUWB-EPVURHGCHU-,NSGKEUWHEUCNLMYGCW.M,EEUPRGWCHGLJUW,OLP-N,WUOLKU-EKEPW,GOLUMYNRVUGLC,EOPEUNMUCO-OCGWBUOLKU-,N-N,WGNLOYUYNOKUNMUCHOLLEYPXUP-ECGMGEKUCNFFQWOWGNLUFOW,G'EPU-,NSGKEUQLG;QELEPPUNMUCNLW,NYYGLJUP";
     var alpha = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',' ','.',',',';','-','\''];
        
        var arr= []; 
        var arr22= []; 
        var count = sttr.length;
         for (j=0; j<=31; j++){
                    var res = 0;
                for(i=0; i < count; i++){
                    if(sttr.charAt(i) == alpha[j]){   
                        arr22.push(alpha[j]);
                        continue
                    }
                    
                    res++;
                }
             
              var res = count - res;
              
                   arr.push(res);   
         }  
        arr22 = arr22.filter( function( item, index, inputArray ) {
           return inputArray.indexOf(item) == index;
    });

        
        console.log(arr);
        console.log(arr22);
        var arr23 =[];
                               
        // Test
        var newSTR = [];
        for(value in sttr){
           // document.write(sttr[value]); 
            if(sttr[value]=='U'){//good
            newSTR.push(' ');
                }
             if(sttr[value]=='E'){//good-
            newSTR.push('e');
                }
             if(sttr[value]=='N'){//good
            newSTR.push('o');
                }
             if(sttr[value]=='W'){//good
            newSTR.push('t');
                }
            if(sttr[value]==','){//good
            newSTR.push('r');
                }
            if(sttr[value]=='G'){//good
            newSTR.push('i');
                }
            if(sttr[value]=='L'){//good
            newSTR.push('n');
                }
            if(sttr[value]=='O'){//good
            newSTR.push('a');
                }
            if(sttr[value]=='P'){//good
            newSTR.push('s');
                }
            if(sttr[value]=='C'){//good
            newSTR.push('c');
                }
            if(sttr[value]=='Y'){//good
            newSTR.push('l');
                }
            if(sttr[value]=='K'){//good
            newSTR.push('d');
                }
            if(sttr[value]=='M'){//good
            newSTR.push('f');
                }
            if(sttr[value]=='-'){
            newSTR.push('p');
                }
            if(sttr[value]=='F'){//good
            newSTR.push('m');
                }
            if(sttr[value]=='H'){//good
            newSTR.push('h');
                }
            if(sttr[value]=='Q'){//good
            newSTR.push('u');
                }
            if(sttr[value]=='J'){//good
            newSTR.push('g');
                }
            if(sttr[value]=='R'){
            newSTR.push('w');
                }
            if(sttr[value]=='S'){//good
            newSTR.push('v');
                }
            if(sttr[value]=='V'){//good
            newSTR.push(' ');
                }
            if(sttr[value]=='B'){//good
            newSTR.push('y');
                }
            if(sttr[value]=='X'){//good-
            newSTR.push(' ');
                }
            if(sttr[value]=='\''){
            newSTR.push('c');
                }
            if(sttr[value]=='T'){//good
            newSTR.push('z');
                }
            if(sttr[value]==';'){
            newSTR.push('q');
                }
            if(sttr[value]=='D'){//good
            newSTR.push('k');
                }
            if(sttr[value]=='Z'){
            newSTR.push('b');
                }
            if(sttr[value]=='&nbsp;'){
            newSTR.push('');
                }
            
            
        }
        console.log(newSTR);
        /*for(al in newSTR){
            document.write(newSTR[al]);
        }*/
       
      
    
       function count_char(str){
                count = str.length;
                alphabet = [" ","'",",","-",".",";","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];
                alphabet1 = [" ","'",",","-",".",";","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];
                alphabet3 = [" ","'",",","-",".",";","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];
                alphabet2 = [" ","E","A","T","S","I","N","O","R","C","D","H","L","U","Y","P","F","M","B","G","W",",","K","V",".","-","'","Z","X","Q","J",";"];
                var dres = 0;
                var arr = []; // Частотний аналіз 1 букви
                var arr2 = []; // Частотний аналіз 1 букви посортований
                var arr22 = []; // Частотний аналіз 1 букви посортований
           
                var myArray = []; // Частотний аналіз біграм числа
                var myArrayS = []; // Масив біграм відсортованих
                var myArraySAl1 = []; // Масив біграм ключі
                var myArraySAl = []; // Масив біграм значення
           
                var myArrayT = []; // Частотний аналіз Триграм числа
                var myArrayST = []; // Масив Триграм відсортованих
                var myArraySAl1T = []; // Масив триграм ключі
                var myArraySAlT = []; // Масив триграм значення
           
                //Створюємо біграми
                for (j=0; j<31; j++){
                    for (k=0; k<31; k++){
                       // for (w=0; w<31; w++){//
                var count1 = 0;
                var pos1 = sttr.indexOf(alphabet[k]+alphabet1[j]);//+alphabet3[w]
                while ( pos1 != -1 ) {
                   count1++;
                   pos1 = sttr.indexOf(alphabet[k]+alphabet1[j],pos1+1); //+alphabet3[w]
                   var newmas = alphabet[k]+alphabet1[j];//+alphabet3[w]
                    
                   myArray[newmas] = count1; //Створює новий масив біграм
                    
                   } myArrayS.push(count1); myArrayS.sort(sortNumber); myArrayS.splice(15, 1); 
                     //}
                   }
                   }
                  //Кінець створення біграм
           
                  //Створюємо Триграми
                  for (j=0; j<31; j++){
                      for (k=0; k<31; k++){
                                for (w=0; w<31; w++){
                        var count1 = 0;
                        var pos1 = sttr.indexOf(alphabet[k]+alphabet1[j]+alphabet3[w]);//
                        while ( pos1 != -1 ) {
                           count1++;
                           pos1 = sttr.indexOf(alphabet[k]+alphabet1[j]+alphabet3[w],pos1+1); //
                           var newmas = alphabet[k]+alphabet1[j]+alphabet3[w];//!!!

                           myArrayT[newmas] = count1; //Створює новий масив біграм

                           } myArrayST.push(count1); myArrayST.sort(sortNumber); myArrayST.splice(15, 1); 
                             }
                           }
                           }
                         //Кінець створення біграм
           
                    //Перевірка масивів в консолі
                         console.log(myArray);
                         console.log(myArrayS);
                         console.log(myArrayS.length);
           
                       //Перевірка масивів в консолі
                         console.log(myArrayT);
                         console.log(myArrayST);
                         console.log(myArrayST.length);
           
           
                   //Створюємо Два масива значень та біграм
                       for (val in myArray){
                            for(var i=0; i<=myArrayS.length; i++){
                            if(myArray[val] == myArrayS[i]){ 
                                myArraySAl.push(myArrayS[i]);
                                myArraySAl1.push(val);
                            break;                  
                            }}}
           
                   //Створюємо Два масива значень та триграм
                       for (val in myArrayT){
                            for(var i=0; i<=myArrayST.length; i++){
                            if(myArrayT[val] == myArrayST[i]){ 
                                myArraySAlT.push(myArrayST[i]);
                                myArraySAl1T.push(val);
                            break;                  
                            }}}
           
                                
           
           

          
            console.log(myArraySAl1);      
            console.log(myArraySAl);
           
            console.log(myArraySAl1T);      
            console.log(myArraySAlT);      
                   
            
            
           
                for (j=0; j<=31; j++){
                    var res = 0;
                for(i=0; i < count; i++){
                    if(str.charAt(i) == alphabet[j]){
                        continue
                    }
                    res++;
                }
                    res = count - res;

                 // document.write("Кількість (" + alphabet[j] + ") " + res + "</br>");
                  
                   arr.push(res);
                   arr2.push(res);
                   arr2.sort(sortNumber);
                }
           
                console.log(arr);   
           //Посортований алфавіт
           
                for(val in arr){
                   // alert(alphabet[val]+' '+val+'='+arr[val]);
                    arr22[val]=alphabet[val];
                        }
                var alphasort = [];   
                      
                 for(j=0; j<=arr2.length; j++){
                    for(i=0; i<=arr.length; i++){
                  // alert (arr2[j]+"="+arr[i]);
                    // alert(arr[val]+' '+val+'='+arr22[val]);
                        
                     if(arr2[j]==arr[i]){
                         
                     alphasort.push(arr22[i]);
                         
                         }}}
                 var  resultAl = [];

                 for(i=0; i<=alphasort.length; i++){
                        if(resultAl.join('').search(alphasort[i]) == '-1') {
                            resultAl.push(alphasort[i]);
                        }
                    }

           
           //console.log(alphasort);
           //console.log(resultAl);
           //console.log(arr2);
           //console.log(arr22);
          
           function sortNumber(a, b)
                {
                return b - a; 
                }
           
       
       //start-gisto
       var randomScalingFactor = function(){ return Math.round(Math.random()*800)};
           
	   var barChartData = {
		labels : arr22,
		datasets : [
			{
				fillColor : "rgba(151,187,205,0.5)",
				strokeColor : "rgba(151,187,205,0.8)",
				highlightFill : "rgba(151,187,205,0.75)",
				highlightStroke : "rgba(151,187,205,1)",
                data : arr
			}
		]

	};
       
        var barChartData2 = {
		labels : resultAl,
		datasets : [
			{
				fillColor : "rgba(151,187,205,0.5)",
				strokeColor : "rgba(151,187,205,0.8)",
				highlightFill : "rgba(151,187,205,0.75)",
				highlightStroke : "rgba(151,187,205,1)",
                data : arr2
			}
		]

	};
        var barChartData3 = {
		labels : myArraySAl1,
		datasets : [
			{
				fillColor : "rgba(151,187,205,0.5)",
				strokeColor : "rgba(151,187,205,0.8)",
				highlightFill : "rgba(151,187,205,0.75)",
				highlightStroke : "rgba(151,187,205,1)",
                data : myArraySAl
			}
		]

	};
        var barChartData4 = {
		labels : myArraySAl1T,
		datasets : [
			{
				fillColor : "rgba(151,187,205,0.5)",
				strokeColor : "rgba(151,187,205,0.8)",
				highlightFill : "rgba(151,187,205,0.75)",
				highlightStroke : "rgba(151,187,205,1)",
                data : myArraySAlT
			}
		]

	};
        

	   window.onload = function(){
		var ctx = document.getElementById("canvas").getContext("2d");//1
		var ctx2 = document.getElementById("canvas2").getContext("2d");
        var ctx3 = document.getElementById("canvas2gram").getContext("2d");
        var ctx4 = document.getElementById("canvas3gram").getContext("2d");
		window.myBar = new Chart(ctx).Bar(barChartData, {//1
			responsive : true
		});
        window.myBar = new Chart(ctx2).Bar(barChartData2, {
			responsive : true
		});
         window.myBar = new Chart(ctx3).Bar(barChartData3, {
			responsive : true
		}); 
         window.myBar = new Chart(ctx4).Bar(barChartData4, {
			responsive : true
		});
	}
       }
       //end-gisto

      </script>
    <div class="container-fluid" style="background-color:#F8F8FF;">
    <blockquote>
      <p>В тексті використовується алфавіт, що складається з англійських великих літер та шести розділових знаків.</p>
       </blockquote>
      <table class="table table-bordered" style="font-size:14px; background-color:#CAE1FF; border: solid white;">
      <tr>
    <td>U</td>
    <td>E</td>
    <td>N</td>
    <td>W</td>
    <td>,</td>
    <td>G</td>
    <td>L</td>
    <td>O</td>
    <td>P</td>
    <td>C</td>
    <td>Y</td>
    <td>K</td>
    <td>M</td>
    <td>-</td>
    <td>F</td>
    <td>H</td>
    <td>Q</td>
    <td>J</td>
    <td>R</td>
    <td>S</td>
    <td>V</td>
    <td>B</td>
    <td>X</td>
    <td>'</td>
    <td>T</td>
    <td>;</td>
    <td>D</td>
    <td>Z</td>
    </tr>
          <tr>
    <td> </td>
    <td>E</td>
    <td>O</td>
    <td>T</td>
    <td>R</td>
    <td>I</td>
    <td>N</td>
    <td>A</td>
    <td>S</td>
    <td>C</td>
    <td>L</td>
    <td>D</td>
    <td>F</td>
    <td>P</td>
    <td>M</td>
    <td>H</td>
    <td>U</td>
    <td>G</td>
    <td>W</td>
    <td>V</td>
    <td> </td>
    <td>Y</td>
    <td> </td>
    <td>C</td>
    <td>Z</td>
    <td>Q</td>
    <td>K</td>
    <td>B</td>
          </tr>
      </table>
      <p>
   
    <div class="row">
     <div class="col-md-5" style="background-color:#EE2C2C; ">
     <ol style="font-family:Georgia; font-size:17px; color:#F8F8FF">
      <li><a href="index.html" style="color:#F8F8FF">Приклад тексту для статистичного аналізу</a></li>
      <li><a href="cezar.html" style="color:#F8F8FF">Код Цезаря</a></li>
      <li><a href="normreplase.html" style="color:#F8F8FF">Простої заміни</a></li>
      <li><a href="viginer.html" style="color:#F8F8FF">Віженера</a></li>
      <li><a href="hilla.html" style="color:#F8F8FF">Хілла</a></li>
     </ol>
     <div class="row">
        
         <div style="color:white"><script>count_char(sttr);</script></div>
         <div style="width: 100%;  background-color:white; color:black; text-align:center; font-style:italic;">
         Частотний аналіз кожної букви<a class="btn btn-primary" href="normreplase_C.html">Подивитись гістограми розшифрованого</a>
			<canvas id="canvas" height="450" width="600"></canvas>
		</div>
   
        <div style="width: 100%; background-color:white; color:black; text-align:center; font-style:italic;">
        Частотний аналіз кожної букви посортований
			<canvas id="canvas2" height="450" width="600"></canvas>
		</div>
       
        <div style="width: 100%; background-color:white; color:black; text-align:center; font-style:italic;">
		Частотний аналіз біграм у тексті
			<canvas id="canvas2gram" height="450" width="600"></canvas>
		</div>
		
		<div style="width: 100%; background-color:white; color:black; text-align:center; font-style:italic;">
		Частотний аналіз Триграм у тексті
			<canvas id="canvas3gram" height="450" width="600"></canvas>
		</div>
    
     </div>
     </div>
     <div class="col-md-7" style="background-color:	#FFFFF0;">
         <span id="text">
<br>
   MN,UOLBUNLEUNMUWHEUPW,QCWQ,EKUEYEFELWPURE,EUGLPWOYYEKUCN,,EYOWGNLPVURHGCHUKEMGLE<br>UWHEUZEHOSGNQ,UNMUWHEUCO,UGLUWHGPUTNLEVUGLU-O,WGCQYO,VUGWPUSEYNCGWBUOLKUFOLNEQS,EXUWHEUFOGLU-Q,-NPEUNMU-,N-NPEKUFNKEYPU.UCNF-QWE,UFNKEYYGLJUOLKUCO,,BGLJUNQWU,EPEO,CHEPUMN,UOQWNFOWGNLUNMUW,OLP-N,WUOLKU-EKEPW,GOLUMYNRUFOLOJEFELWVUOPUREYYUOPUN-WGFGTOWGNLUNMUPNYSGLJUNMUWHEU,NQWGLJUWOPDPXUGLU-O,WGCQYO,VUCNFFQWOWGNLUFOW,G'EPUO,EU,ECEGSEKUMN,UKGMME,ELWUC,NPP,NOKUWB-EPVURHGCHU-,NSGKEUWHEUCNLMYGCW.M,EEUPRGWCHGLJUW,OLP-N,WUOLKU-EKEPW,GOLUMYNRVUGLC,EOPEUNMUCO-OCGWBUOLKU-,N-N,WGNLOYUYNOKUNMUCHOLLEYPXUP-ECGMGEKUCNFFQWOWGNLUFOW,G'EPU-,NSGKEUQLG;QELEPPUNMUCNLW,NYYGLJUP
    <script>document.write("<br><br><center><span style=\"font-style:italic;font-size:3em;\" >Розшифрований текст</center><br><br>");
         for(al in newSTR){
            document.write(newSTR[al]);
        }
         </script>
            </span>
    
</div>
   
    </div>
    </div>
    
  </body>
</html>